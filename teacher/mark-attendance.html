<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher Attendance</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <!-- Navbar -->
  <nav class="bg-green-700 p-4 text-white flex justify-between">
    <h1 class="text-xl font-bold">Teacher Portal - Attendance</h1>
    <a href="teacher-dashboard.html" class="hover:underline">Back</a>
  </nav>

  <!-- Container -->
  <div class="max-w-4xl mx-auto mt-6 bg-white p-6 rounded-xl shadow-lg">
    <h2 class="text-xl font-semibold mb-4">Upload Attendance</h2>

    <!-- Step 1: Select Class Details -->
    <form id="attendance-form" class="space-y-4">
      <div>
        <label class="block mb-1 font-medium">Class</label>
        <select id="class-select" class="w-full p-2 border rounded-lg">
          <option value="">Select Class</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
		  <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
		  <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
		  <option value="10">10</option>
        </select>
      </div>

      <div>
        <label class="block mb-1 font-medium">Subject</label>
        <select id="subject-select" class="w-full p-2 border rounded-lg">
          <option value="">Select Subject</option>
          <option value="Math">Math</option>
          <option value="Science">Science</option>
          <option value="History">History</option>
        </select>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block mb-1 font-medium">Date</label>
          <input type="date" id="date-input" class="w-full p-2 border rounded-lg">
        </div>
        <div>
          <label class="block mb-1 font-medium">Time</label>
          <input type="time" id="time-input" class="w-full p-2 border rounded-lg">
        </div>
      </div>

      <button type="button" onclick="showStudents()" 
        class="w-full bg-green-600 text-white p-2 rounded-lg hover:bg-green-700">
        Submit
      </button>
    </form>
  </div>

  <!-- Step 2: Student List -->
  <div id="student-section" class="max-w-4xl mx-auto mt-6 hidden bg-white p-6 rounded-xl shadow-lg">
    <h2 class="text-xl font-semibold mb-4">Mark Attendance</h2>
    <form id="student-list-form">
      <table class="w-full border">
        <thead>
          <tr class="bg-gray-200">
            <th class="border p-2">Roll No</th>
            <th class="border p-2">Name</th>
            <th class="border p-2">Present</th>
            <th class="border p-2">Absent</th>
          </tr>
        </thead>
        <tbody id="student-table">
          <!-- Populated by JS -->
        </tbody>
      </table>

      <button type="button" onclick="saveAttendance()" 
        class="mt-4 w-full bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700">
        Save Attendance
      </button>
    </form>
  </div>

  <script>
    // Dummy Student Data
    const students = [
      { roll: 1, name: "Aarav" },
      { roll: 2, name: "Priya" },
      { roll: 3, name: "Rohan" },
      { roll: 4, name: "Neha" },
      { roll: 5, name: "Ankit" }
    ];

    // Step 1: Show students after submitting class details
    function showStudents() {
      const classVal = document.getElementById('class-select').value;
      const subjectVal = document.getElementById('subject-select').value;
      const dateVal = document.getElementById('date-input').value;
      const timeVal = document.getElementById('time-input').value;

      if (!classVal || !subjectVal || !dateVal || !timeVal) {
        alert("Please fill all details!");
        return;
      }

      const tableBody = document.getElementById('student-table');
      tableBody.innerHTML = '';

      students.forEach(student => {
        const row = `
          <tr>
            <td class="border p-2 text-center">${student.roll}</td>
            <td class="border p-2">${student.name}</td>
            <td class="border p-2 text-center"><input type="radio" name="status-${student.roll}" value="Present"></td>
            <td class="border p-2 text-center"><input type="radio" name="status-${student.roll}" value="Absent"></td>
          </tr>
        `;
        tableBody.innerHTML += row;
      });

      document.getElementById('student-section').classList.remove('hidden');
    }

    // Step 2: Save Attendance to local .txt file
    function saveAttendance() {
      let attendanceData = "Roll No, Name, Status\n";

      students.forEach(student => {
        const status = document.querySelector(`input[name="status-${student.roll}"]:checked`);
        const result = status ? status.value : "Not Marked";
        attendanceData += `${student.roll}, ${student.name}, ${result}\n`;
      });

      // Create a downloadable file
      const blob = new Blob([attendanceData], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = "attendance.txt";
      a.click();

      alert("Attendance saved successfully!");
    }
  </script>

</body>
</html>



